# ============================================
# PEEPOPAY API ENVIRONMENT VARIABLES
# ============================================
#
# LOCAL/DEV: All variables below are used directly from this .env file
# SWARM: Variables marked with [SWARM: SECRET] must be provided as Docker secrets
#        Variables marked with [BOTH] are used in both environments
#
# ============================================

# ============================================
# Database
# ============================================
# [LOCAL/DEV ONLY] - For docker-compose.yml and docker-compose.dev.yml
# [SWARM] Uses external managed database via Docker secret 'database_url'
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/peepopay

# ============================================
# API Configuration
# ============================================
# [BOTH] Used in all environments
API_PORT=4000
API_URL=http://localhost:4000
NODE_ENV=development

# [LOCAL/DEV ONLY] - Not used in production
JWT_SECRET=your-jwt-secret-change-in-production

# ============================================
# Better Auth
# ============================================
# [SWARM: SECRET 'better_auth_secret'] - In Swarm, provide via Docker secret
# [LOCAL/DEV] Read from this .env file
BETTER_AUTH_SECRET=your-better-auth-secret-change-in-production

# [BOTH] Used in all environments
BETTER_AUTH_URL=http://localhost:4000

# [BOTH] OAuth credentials - same in all environments
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================
# Stripe
# ============================================
# [SWARM: SECRET 'stripe_secret_key'] - In Swarm, provide via Docker secret
# [LOCAL/DEV] Read from this .env file
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# [BOTH] Publishable key - safe to use in all environments
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# [BOTH] Used in all environments
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_CLIENT_ID=ca_your_stripe_client_id

# ============================================
# Redis
# ============================================
# [LOCAL/DEV] Points to local Redis container
# [SWARM] Hardcoded to redis://redis:6379 in stack file (managed internally)
REDIS_URL=redis://localhost:6379

# ============================================
# RabbitMQ
# ============================================
# [LOCAL/DEV] Points to local RabbitMQ container with password
# [SWARM: SECRET 'rabbitmq_password'] - Password provided via Docker secret
RABBITMQ_URL=amqp://localhost:5672
RABBITMQ_PASSWORD=admin123

# ============================================
# Email (Resend)
# ============================================
# [SWARM: SECRET 'smtp_password'] - In Swarm, provide via Docker secret
# [LOCAL/DEV] Read from this .env file
RESEND_API_KEY=re_your_resend_api_key

# [BOTH] Used in all environments
FROM_EMAIL=noreply@peepopay.com
FROM_NAME=PeepoPay

# ============================================
# Dashboard URL
# ============================================
# [BOTH] Used for redirects and CORS
# LOCAL: http://localhost:3000
# SWARM: https://peepopay.com
DASHBOARD_URL=http://localhost:3000

# ============================================
# ENVIRONMENT FILE STRUCTURE
# ============================================
#
# ROOT .env (./env)
# - Contains ONLY docker-compose.yml variables:
#   - RABBITMQ_PASSWORD (used by RabbitMQ service)
#   - LETSENCRYPT_EMAIL (used by Traefik service)
#
# PACKAGE .env files (./packages/*/env)
# - packages/api/.env (THIS FILE)
# - packages/dashboard/.env
# - packages/widget/.env
# - Each contains service-specific variables
#
# DOCKER COMPOSE USAGE:
# - docker-compose.yml uses: env_file: ./packages/api/.env
# - docker-compose.dev.yml uses: env_file: ./packages/api/.env
# - NO DUPLICATION between root and package .env files
#
# ============================================
# DOCKER SWARM SECRETS SETUP
# ============================================
# Before deploying to Swarm, create these secrets:
#
# echo "postgresql://user:pass@host:5432/db?sslmode=require" | docker secret create database_url -
# echo "your-rabbitmq-password" | docker secret create rabbitmq_password -
# echo "sk_live_xxx" | docker secret create stripe_secret_key -
# echo "your-production-secret" | docker secret create better_auth_secret -
# echo "re_xxx" | docker secret create smtp_password -
# ============================================
